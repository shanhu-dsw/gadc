<% content_for :filter_form do %>
  <%= tag.div class: 'row' do %>
    <%= tag.div (manage_text_tag '名称', :query_name, params[:query_name]), class: 'col-md-4' %>
    <%#= tag.div (manage_text_tag '地址', :query_ip, params[:query_ip]), class: 'col-md-4' %>
    <%= tag.div (manage_select_tag '类型', :query_type, params[:query_type], options_for_select(human_attribute_enum(:engine, Engine.engine_types, :engine_type)), include_blank: '全部'), class: 'col-md-4' %>
  <% end %>
<% end %>

<% content_for :th do %>
  <%= tag.th Engine.human_attribute_name(:full_name) %>
  <%= tag.th Engine.human_attribute_name(:engine_type) %>
  <%= tag.th Engine.human_attribute_name(:internal_address) %>
  <%= tag.th Engine.human_attribute_name(:external_address) %>
  <%= tag.th Engine.human_attribute_name(:secret) %>
  <%= tag.th Engine.human_attribute_name(:workers) %>
  <%= tag.th Engine.human_attribute_name(:device) %>
  <%= tag.th Engine.human_attribute_name(:cached) %>
<% end %>


<%= render 'manage/resources/index' do |resource| %>
  <%= tag.td resource.full_name %>
  <%= tag.td resource.engine_type %>
  <%= tag.td resource.internal_address %>
  <%= tag.td resource.external_address %>
  <%= tag.td resource.secret %>
  <%= tag.td resource.workers %>
  <%= tag.td resource.device === -1 ? 'CPU' : "GPU #{resource.device}" %>
  <%= tag.td resource.cached ? '开启':'关闭' %>
<% end %>